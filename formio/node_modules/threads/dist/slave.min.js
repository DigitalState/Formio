function handlerDone(){var r=Array.prototype.slice.call(arguments,0);this.postMessage({response:r})}function handlerProgress(r){this.postMessage({progress:r})}function handlerError(r){var e={message:r.message,name:r.name,stack:r.stack};this.postMessage({error:e})}function handlerDoneTransfer(){var r=Array.prototype.slice.call(arguments),e=r.pop();e instanceof Array||!this.console||console.error("Expected 2nd parameter of <doneCallback>.transfer() to be an array. Got:",e),this.postMessage({response:r},e)}function isPromise(r){return r&&"function"==typeof r.then}self.module={exports:function(){console&&console.error("No thread logic initialized.")}},self.onmessage=function(r){var e=r.data.scripts;if(e&&e.length>0&&"function"!=typeof importScripts)throw new Error("importScripts() not supported.");if(r.data.initByScripts&&importScripts.apply(null,e),r.data.initByMethod){var t=r.data.method;this.module.exports=Function.apply(null,t.args.concat(t.body)),e&&e.length>0&&importScripts.apply(null,e)}if(r.data.doRun){var o=this.module.exports;if("function"!=typeof o)throw new Error("Cannot run thread logic. No handler has been exported.");var n=handlerDone.bind(this);n.transfer=handlerDoneTransfer.bind(this);var s=o.call(this,r.data.param,n,handlerProgress.bind(this));isPromise(s)&&s.then(n,handlerError.bind(this))}}.bind(self);